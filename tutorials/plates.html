<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plate Notation &mdash; DagSim  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../_static/css/css-style.css?v=c9ecb4b3" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/tabs.js?v=3030b3cb"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Importing models from other libraries" href="model_from_weight_matrix.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            DagSim
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Content:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installing DagSim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specify_with_code.html">Specifying a simulation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="linear_regression.html">Simulate data for a simple linear regression problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="selection_and_stratification.html">Special nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="model_from_weight_matrix.html">Importing models from other libraries</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Plate Notation</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DagSim</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../tutorials.html">Tutorials</a></li>
      <li class="breadcrumb-item active">Plate Notation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/plates.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="plate-notation">
<h1>Plate Notation<a class="headerlink" href="#plate-notation" title="Link to this heading">ÔÉÅ</a></h1>
<p>In this tutorial, you will learn how to use the plate notation in DagSim to represent replicated nodes.
If you are not familiar with using DagSim, please see <a class="reference internal" href="../specify_with_code.html#specifying-a-simulation"><span class="std std-ref">Specifying a simulation</span></a> for a general overview of the framework, and <a class="reference internal" href="../quickstart.html#quickstart"><span class="std std-ref">Quickstart</span></a> for examples on how to use the framework.</p>
<p>The <a class="reference external" href="https://en.wikipedia.org/wiki/Plate_notation">plate notation</a> is a template-based representation language that allows for a convenient and compact way of representing nodes that are replicated in the graph. Instead of defining and drawing a node (that should be replicated) multiple times, you define that node once and encapsulate it inside a rectangle (thus the name plate).</p>
<p>For example, the two graphs below are equivalent, where the plate on the left hand side is replicated three times to unfold as the graph on the right hand side:</p>
<a class="reference internal image-reference" href="../_images/plates.png"><img alt="../_images/plates.png" class="align-center" src="../_images/plates.png" style="width: 80%;" /></a>
<p>In DagSim, you specify the name of the plate in which a node resides, if any, and the number of replications of each plate in the graph. You can have as many plates as you want in the graph, though currently, a node can only reside in one plate.</p>
<p>The following are examples of how to exactly do this in Python and YAML.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Python</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">YAML</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p>In Python code, you add a <code class="code docutils literal notranslate"><span class="pre">plates</span></code> argument to the node definition and give it the name of the plate in which that node resides, and then in the definition of the graph, you specify the number of replications of each plate in the graph, in the form of a dictionary of (plate_name:number_of_replications) key-value pairs, as shown in the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dagsim.base</span> <span class="k">as</span> <span class="nn">ds</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">add_noise</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">()</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="n">add_noise</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">X</span><span class="p">],</span> <span class="n">plates</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;plate1&quot;</span><span class="p">])</span>

<span class="n">graph</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">Graph</span><span class="p">([</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">],</span> <span class="n">plates_reps</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;plate1&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, when you call the draw method on the graph, you will get the image view as the one on the left hand side above (which we call the folded view). To get the view as on the right hand side, you call draw method with the argument <code class="code docutils literal notranslate"><span class="pre">folded=False</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">folded</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p>In YAML, you follow a very similar way of defining plates, specifying the plate in which each node lives, if any, and the number of replications of each node in the graph.
You would specify the simulation above as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">graph</span><span class="p">:</span>
<span class="w">  </span><span class="nt">python_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">functions_file.py</span><span class="w"> </span><span class="c1"># the path of the python file containing the definition of the add_noise function</span>
<span class="w">  </span><span class="nt">plates_reps</span><span class="p">:</span>
<span class="w">    </span><span class="nt">plate1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">    </span><span class="nt">X</span><span class="p">:</span>
<span class="w">      </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">numpy.random.normal</span>
<span class="w">    </span><span class="nt">Y</span><span class="p">:</span>
<span class="w">      </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">add_noise(X)</span>
<span class="w">      </span><span class="nt">plates</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">plate1</span>

<span class="nt">instructions</span><span class="p">:</span>
<span class="w">  </span><span class="nt">simulation</span><span class="p">:</span>
<span class="w">    </span><span class="nt">csv_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">plates_demo</span>
<span class="w">    </span><span class="nt">num_samples</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</pre></div>
</div>
</div></div>
<div class="toctree-wrapper compound">
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="model_from_weight_matrix.html" class="btn btn-neutral float-left" title="Importing models from other libraries" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Ghadi Al Hajj.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>